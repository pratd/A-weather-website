const weatherMapKey="c11fb4df334457589dd537b8b1dd9cbd",forecastUrl="http://api.openweathermap.org/data/2.5/forecast",weatherUrl="http://api.openweathermap.org/data/2.5/weather",areaUrl="http://api.openweathermap.org/data/2.5/find?",cityData=function(e){let t=$("#city").val();t&&""!=t?(t=t.trim(),initializeweatherData(weatherUrl,t,weatherMapKey,e),initializeForecastData(forecastUrl,t,weatherMapKey,e)):alert("Please enter a valid city name")};function initializeweatherData(e,t,a,r){$.ajax({url:e,dataType:"jsonp",data:{q:t,appid:a,units:r},type:"GET",success:function(e){res=createData(e),fetchweatherData(res[0],res[1],res[2],res[3],res[4],res[5],res[6])}}).fail(function(e){console.error(e),alert("Error sending request")})}function initializeForecastData(e,t,a,r){$.ajax({url:e,dataType:"jsonp",data:{q:t,appid:a,units:r},jsonpCallback:"fetchforecastData",type:"GET"}).fail(function(e){console.error(e),alert("Error sending request")})}function fetchweatherData(e,t,a,r,o,n,c){$("#details").show("slow"),iconurl="http://openweathermap.org/img/w/"+n+".png",$("#my_image").attr("src",iconurl),$("#mintemp").text(Math.round(10*a)/10+"°C"),$("#maxtemp").text(Math.round(10*r)/10+"°C"),$("#cloud").text(c+" %"),$("#windspeed").text(Math.round(3600*o/1e3*10)/10+" km/h"),$("#weatherdesc").text(e),$("#Temperaturereading").text(Math.round(10*t)/10+"°C"),a>35?$("#tempbox").css("background-color","#ff6961"):a>30&a<35?$("#tempbox").css("background-color","#FF6347"):a<30&a>15?$("#tempbox").css("background-color","#66cc91"):a<15&a>5?$("#tempbox").css("background-color","#B0D1FF"):$("#tempbox").css("background-color","#F8F8FF")}function fetchforecastData(e){$("#log").show("slow");let t="";e.city.name,e.city.country;t+="<h3> Weather Forecast for ${cityName}, ${country}</h3>",e.list.forEach(function(e){t+="<p>"+e.dt_txt+": "+e.main.temp+"</p>"}),$("#log").html(t)}function createData(e){return weathertype=e.weather[0].main,countrytype=e.sys.country,weatherdesc=e.weather[0].description,temp=e.main.temp,tempmin=e.main.temp_min,tempmax=e.main.temp_max,windspeed=e.wind.speed,winddeg=e.wind.deg,icontype=e.weather[0].icon,cloudcover=e.clouds.all,[weatherdesc,temp,tempmin,tempmax,windspeed,icontype,cloudcover]}$(document).ready(function(){$("#submitweather").click(function(){cityData("metric")})});